# Adaptive drill catalog
# Levels map to curated drill specs consumed by AdaptiveDrills.
drills:
  - id: PATHWAYS_1_4
    family: note
    level: 1
    tier: 0
    transition: true
    defaults:
      tempo_bpm: 80
      range_min: 60
      range_max: 72
      assistance_policy: { Replay: 2, GuideTone: 1 }
    params:
      avoid_repeat: true
      allowed_degrees: [0, 1, 2, 3] # I窶的V
      range_below_semitones: 0
      range_above_semitones: 12
      use_pathway: true
      pathway_repeat_lead: false
      pathway_step_beats: 1.0
      pathway_rest_beats: 0.5

  - id: PATHWAYS_5_7
    family: note
    level: 1
    tier: 1
    transition: true
    defaults:
      tempo_bpm: 80
      range_min: 60
      range_max: 72
      assistance_policy: { Replay: 3, GuideTone: 1 }
    params:
      avoid_repeat: true
      allowed_degrees: [4, 5, 6] # V窶天II
      range_below_semitones: 0
      range_above_semitones: 12
      use_pathway: true
      pathway_repeat_lead: false
      pathway_step_beats: 1.0
      pathway_rest_beats: 0.5

  - id: PATHWAYS
    family: note
    level: 1
    tier: 2
    defaults:
      tempo_bpm: 80
      range_min: 60
      range_max: 72
      assistance_policy: { Replay: 3, GuideTone: 1 }
    params:
      avoid_repeat: true
      range_below_semitones: 0
      range_above_semitones: 12
      use_pathway: true
      pathway_repeat_lead: false
      pathway_step_beats: 1.0
      pathway_rest_beats: 0.5

  - id: NOTE_1_4
    family: note
    level: 2
    tier: 0
    transition: true
    defaults:
      tempo_bpm: 72
      range_min: 60
      range_max: 72
      assistance_policy: { Replay: 3 }
    params:
      allowed_degrees: [0, 1, 2, 3] # I窶的V
      range_below_semitones: 0
      range_above_semitones: 12
      avoid_repeat: true
  
  - id: NOTE_5_7
    family: note
    level: 2
    tier: 1
    transition: true
    defaults:
      tempo_bpm: 72
      range_min: 60
      range_max: 72
      assistance_policy: { Replay: 3 }
    params:
      allowed_degrees: [4, 5, 6] # V窶天II
      range_below_semitones: 0
      range_above_semitones: 11
      avoid_repeat: true
  
  - id: NOTE
    family: note
    level: 2
    tier: 2
    defaults:
      tempo_bpm: 72
      range_min: 60
      range_max: 72
      assistance_policy: { Replay: 3 }
    params:
      range_below_semitones: 0
      range_above_semitones: 11
      avoid_repeat: true
  
  - id: NOTE_TO_TONIC
    family: note
    level: 3
    tier: 0
    defaults:
      tempo_bpm: 72
      range_min: 60
      range_max: 72
      assistance_policy: { Replay: 3 }
    params:
      allowed_degrees: [1, 2, 3, 4, 5, 6]
      tonic_anchor: "after"
      range_below_semitones: 0
      range_above_semitones: 12
      avoid_repeat: true

  - id: NOTE_AFTER_TONIC
    family: note
    level: 3
    tier: 1
    defaults:
      tempo_bpm: 72
      range_min: 60
      range_max: 72
      assistance_policy: { Replay: 3 }
    params:
      allowed_degrees: [1, 2, 3, 4, 5, 6]
      tonic_anchor: "before"
      range_below_semitones: 0
      range_above_semitones: 12
      avoid_repeat: true

  - id: NOTE_WITH_TONIC
    family: note
    level: 3
    tier: 2
    defaults:
      tempo_bpm: 72
      range_min: 60
      range_max: 72
      assistance_policy: { Replay: 3 }
    params:
      allowed_degrees: [1, 2, 3, 4, 5, 6]
      tonic_anchor: "both"
      tonic_anchor_include_octave: true
      range_below_semitones: 0
      range_above_semitones: 12
      avoid_repeat: true

  - id: MELODY2_60_STEP1
    family: melody
    level: 4
    tier: 0
    defaults:
      tempo_bpm: 60
      range_min: 60
      range_max: 72
      assistance_policy: { Replay: 2, TempoDown: 1 }
    params:
      melody_length: 2
      melody_max_step: 1      # 1 = stepwise only
      range_below_semitones: 0
      range_above_semitones: 12
  
  - id: MELODY2_60_STEP2
    family: melody
    level: 4
    tier: 1
    defaults:
      tempo_bpm: 60
      range_min: 60
      range_max: 72
      assistance_policy: { Replay: 2, TempoDown: 1 }
    params:
      melody_length: 2
      melody_max_step: 2
      range_below_semitones: 0
      range_above_semitones: 12

  - id: MELODY2_60
    family: melody
    level: 4
    tier: 2
    defaults:
      tempo_bpm: 60
      range_min: 60
      range_max: 72
      assistance_policy: { Replay: 2, TempoDown: 1 }
    params:
      melody_length: [2, 3]
      melody_max_step: 2
      range_below_semitones: 0
      range_above_semitones: 12
      

  # - id: INTERVAL_STEPWISE_72
  #   family: interval
  #   level: 2
  #   defaults:
  #     tempo_bpm: 72
  #     range_min: 55
  #     range_max: 79
  #     assistance_policy: { Replay: 2, GuideTone: 1 }
  #   sampler_params:
  #     interval_allowed_sizes: [1, 2, 3, 4]
  #     interval_range_semitones: 24

  